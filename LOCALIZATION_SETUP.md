# ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ QMS API - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **–ú–∏–≥—Ä–∞—Ü–∏—è** 
- **–ü—É—Ç—å**: `database/migrations/2026_02_19_000000_add_locale_to_users_table.php`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∫—É `locale` –≤ —Ç–∞–±–ª–∏—Ü—É `users`
- **–í—ã–ø–æ–ª–Ω–∏—Ç—å**: `php artisan migrate`

### 2. **Middleware**
- **–ü—É—Ç—å**: `app/Http/Middleware/SetLocale.php`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —è–∑—ã–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: 
  1. –Ø–∑—ã–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
  2. –ó–∞–≥–æ–ª–æ–≤–æ–∫ `Accept-Language`
  3. –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (en)

### 3. **Service**
- **–ü—É—Ç—å**: `app/Services/LocalizationService.php`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π
- **–ú–µ—Ç–æ–¥—ã**:
  - `getSupportedLocales()` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏
  - `getLanguageNames()` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —è–∑—ã–∫–æ–≤
  - `getStatusNames()` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
  - `updateUserLocale()` - –æ–±–Ω–æ–≤–∏—Ç—å —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 4. **Request –≤–∞–ª–∏–¥–∞—Ü–∏—è**
- **–ü—É—Ç—å**: `app/Http/Requests/UpdateUserLocaleRequest.php`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
- **–ü—Ä–∞–≤–∏–ª–∞**: `locale` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–∏–º –∏–∑ [en, ru, de]

### 5. **–§–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤**
–°–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã –¥–ª—è —Ç—Ä—ë—Ö —è–∑—ã–∫–æ–≤:

#### English (en)
- `resources/lang/en/languages.php` ‚úÖ
- `resources/lang/en/statuses.php` ‚úÖ

#### –†—É—Å—Å–∫–∏–π (ru)
- `resources/lang/ru/languages.php` ‚úÖ
- `resources/lang/ru/statuses.php` ‚úÖ

#### Deutsch (de)
- `resources/lang/de/languages.php` ‚úÖ
- `resources/lang/de/statuses.php` ‚úÖ

### 6. **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**
- **–ü—É—Ç—å**: `app/Http/Controllers/UserProfileController.php`
- **–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
  - `getLanguages()` - GET /api/v1/languages
  - `updateLocale()` - PUT /api/v1/users/locale

### 7. **–ú–∞—Ä—à—Ä—É—Ç—ã API**
- **–ü—É—Ç—å**: `routes/api.php`
- **–î–æ–±–∞–≤–ª–µ–Ω—ã**:
  - `GET /api/v1/languages` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —è–∑—ã–∫–æ–≤
  - `PUT /api/v1/users/locale` - –æ–±–Ω–æ–≤–∏—Ç—å —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 8. **–ú–æ–¥–µ–ª—å**
- **–ü—É—Ç—å**: `app/Models/User.php`
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `locale` –≤ `$fillable`

### 9. **Bootstrap –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
- **–ü—É—Ç—å**: `bootstrap/app.php`
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω middleware `SetLocale`

### 10. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- **–ü—É—Ç—å**: `LOCALIZATION.md`
- **–°–æ–¥–µ—Ä–∂–∏—Ç**: –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
```bash
php artisan migrate
```

### API endpoints

#### 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
```bash
curl -X GET http://localhost:8000/api/v1/languages \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "supported_locales": ["en", "ru", "de"],
  "current_locale": "ru",
  "language_names": {
    "en": "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",
    "ru": "–†—É—Å—Å–∫–∏–π",
    "de": "–ù–µ–º–µ—Ü–∫–∏–π"
  },
  "status_names": {
    "online": "–û–Ω–ª–∞–π–Ω",
    "chatty": "–ì–æ—Ç–æ–≤ –ø–æ–±–æ–ª—Ç–∞—Ç—å",
    "angry": "–ó–ª–æ–π",
    "depressed": "–î–µ–ø—Ä–µ—Å—Å–∏—è",
    "home": "–î–æ–º–∞",
    "work": "–ù–∞ —Ä–∞–±–æ—Ç–µ",
    "eating": "–ö—É—à–∞—é",
    "away": "–û—Ç–æ—à—ë–ª",
    "unavailable": "–ù–µ –¥–æ—Å—Ç—É–ø–µ–Ω",
    "busy": "–ó–∞–Ω—è—Ç",
    "do_not_disturb": "–ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å"
  }
}
```

#### 2. –û–±–Ω–æ–≤–∏—Ç—å —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -X PUT http://localhost:8000/api/v1/users/locale \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"locale": "ru"}'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "locale": "ru",
  "language_name": "–†—É—Å—Å–∫–∏–π"
}
```

---

## üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ Accept-Language

```bash
# –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
curl -X GET http://localhost:8000/api/v1/languages

# –†—É—Å—Å–∫–∏–π
curl -X GET http://localhost:8000/api/v1/languages \
  -H "Accept-Language: ru-RU,ru;q=0.9"

# –ù–µ–º–µ—Ü–∫–∏–π
curl -X GET http://localhost:8000/api/v1/languages \
  -H "Accept-Language: de-DE,de;q=0.9"
```

### 2. –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –û–±–Ω–æ–≤–∏—Ç—å —è–∑—ã–∫: `PUT /api/v1/users/locale` —Å `{"locale": "de"}`
4. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å: `GET /api/v1/users/profile`
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —è–∑—ã–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `de`

---

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–∞–Ω—Å–∫–æ–≥–æ (es):

1. **–°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é**:
   ```bash
   mkdir -p resources/lang/es
   ```

2. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤**:
   - `resources/lang/es/languages.php`
   - `resources/lang/es/statuses.php`

3. **–û–±–Ω–æ–≤–∏—Ç—å SetLocale middleware**:
   ```php
   private const SUPPORTED_LOCALES = ['en', 'ru', 'de', 'es'];
   ```

4. **–û–±–Ω–æ–≤–∏—Ç—å UpdateUserLocaleRequest**:
   ```php
   'locale' => ['required', 'string', 'in:en,ru,de,es'],
   ```

5. **–û–±–Ω–æ–≤–∏—Ç—å LocalizationService**:
   ```php
   private const SUPPORTED_LOCALES = ['en', 'ru', 'de', 'es'];
   ```

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞** - –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É Accept-Language –∏–ª–∏ –ø—Ä–æ—Ñ–∏–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

‚úÖ **–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ API –æ—Ç–≤–µ—Ç—ã** - –≤—Å–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤, –æ—à–∏–±–∫–∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã

‚úÖ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —è–∑—ã–∫ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode** - —ç–º–æ–¥–∑–∏ –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|-----|----------|--------|
| en  | English  | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| ru  | –†—É—Å—Å–∫–∏–π  | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| de  | Deutsch  | ‚úÖ –ì–æ—Ç–æ–≤–æ |

---

**–°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

